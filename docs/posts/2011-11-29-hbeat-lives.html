<!DOCTYPE html>
<html lang="en"> 
<head profile="http://www.w3.org/2005/10/profile">
    <meta charset="UTF-8">
    <meta name="description" content="Haskell, electronics et al.">
    <meta name="author" content="Tim Docker">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="HBeat Lives">
    <meta name="twitter:description" content="">
        <title>HBeat Lives</title>
    <link rel="stylesheet" href="/css/fonts.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header id="header">
      <div class="header-content">
        <nav>
            <a href="/"><div >Home</div></a>
        </nav>
    
        <div class="right-sidebar">
            <a class="ext-link" href="https://github.com/timbod7">
            <img src="/images/github-logo.png" height=24 alt="Github Profile"/>
        </a>
    </div>
      </div>
    </header>

<div id="page">
    <div class="page-content">
      <div class="masthead">
          <span class="title">
              HBeat Lives
          </span>
          <br>
          <span class="byline">Tim Docker</span>
          <br>
          <span class="date">2011-11-29</span>
          <br>
          <div class="metadata">
          </div>
      </div>
      <article class="post">
          <p>Reorganising my projects home, I copied in the old documentation for my <a href="http://dockerz.net/twd/hBeat">hbeat</a> program. The docs needed some updating, so I decided to check it all still works ok. Fearing bitrot, I was pleased and a little suprised to see that on my recently rebuilt ubuntu machine, all I needed was</p>
<pre><code>sudo apt-get install libsdl1.2-dev
sudo apt-get install libsdl-mixer1.2-dev
cabal-dev install hbeat</code></pre>
<p>Or at least that's what I first thought. The program fired up ok, but failed to respond to mouse clicks as expected. It turns out that this was a pre-existing bug - if the screen redraws don't happen fast enough, hbeat gets further and further behind in it's event processing eventually ignoring everything. A small code fix (now published to hackage) causes out-of-date redraw requests to be dropped. But why was I seeing this problem now? It seems that since I wrote the software, openGL via SDL seems to have got alot slower. The compositing window manager (compiz) seems to be the culprit - it's consuming significant cpu time whilst hbeat is running. Some references to this can be found <a href="http://forums.libsdl.org/viewtopic.php?t=6511&amp;sid=19ba7791909f191ef4959cf13841caec">here</a>. I guess there's a downside to all those fancy compositing effects. It's a shame hbeat is now a fair bit glitchier than it was before. Maybe sometime I'll look at this, but for now at least it still works.</p>
      </article>
    </div>
</div>

<footer id="footer">
  <div class="footer-content"></div>
</footer>

<script src="/js/main.js"></script>
</body>
</html>
